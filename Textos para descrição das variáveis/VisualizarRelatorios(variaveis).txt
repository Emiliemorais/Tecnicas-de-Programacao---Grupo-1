
@SuppressWarnings"serial"
 class VisualizarRelatorios extends JFrame 


	 JPanel contentPane;
	  total = 0;
	 String numero;
	List<String> servicos =  ArrayList<String>;
	  contador = 0;
	  numeroTotalDeServicos = 0;
	  valorTotalDoServico = 0;
	  valorTotalASerPAgo = 0;
	  total2 = 0;

	Decimalmat decimal =  Decimalmat"##0.00";

	  void mainString[] args 
	
		EventQueue.invokeLater Runnable
		
			
			// Método que mostra a janela de Vizualização dos relatórios
			 void run  
			
				 
				
					VisualizarRelatorios frame =  VisualizarRelatorios;
					frame.setVisible;
				 
				 Exception e
				
					mostrarMensagemDeErroe.getMessage;
				
			
		;
	

	// Construtor dos componentes da janela VIzualizar Relatorios
	 VisualizarRelatorios throws SQLException, RelatorioException,
			PoerException, ParseException 
	
		setTitle"Relat\u00F3rios";
		setDefaultCloseOperationJFrame.EXIT_ON_CLOSE;
		setBounds100, 100, 800, 600;
		contentPane =  JPanel;
		contentPane.setBorder EmptyBorder5, 5, 5, 5;
		setContentPanecontentPane;
		contentPane.setLayout;

		final JScrollPane scrollPane =  JScrollPane;
		scrollPane.setBounds10, 10, 660, 486;
		contentPane.addscrollPane;

		final DefaultTableModel modelo =  DefaultTableModel,
				 String[]  "Nome do ServiÃ§o", "Quantidade", "Valor total",
						"Valor recebido"  
		
			[] columnEditables =  []  , , ,
					 ;
			
			// Método que verica se a célula pode ser alterada
			  isCellEditable  row,  column 
			
				 columnEditables[column];
			
		;

		final JTable table =  JTablemodelo;
		table.getColumnModel.getColumn0.setResizable;
		table.getColumnModel.getColumn1.setResizable;
		table.getColumnModel.getColumn2.setResizable;
		table.getColumnModel.getColumn3.setResizable;
		scrollPane.setViewportViewtable;

		RelatorioController relatorioController = RelatorioController
				.getInstance;

		Relatorio relatorio =  Relatorio;

		PesquisarRelatorio.tipoBusca == 1 
		

			relatorio.setBarbeiroPesquisarRelatorio.barbeiro;

			ResultSet rs = relatorioController.pesquisarPorBarbeirorelatorio;

			 rs.next 

				 servicos.containsrs.getString"nome" == 
				
					servicos.addrs.getString"nome";
					contador++;
=0; i<contador; i++
			
				rs.beeFirst;
				 rs.next 
					 servicos.geti.equalsrs.getString"nome" 
					
						numero = rs.getString"preco".replace",", ".";
						 valor = .parsenumero;
						valorTotalDoServico = valorTotalDoServico + valor;

						numeroTotalDeServicos++;
					
				

				String[] dados =  String[4];
				dados[0] = servicos.geti;
				dados[1] = eger.toStringnumeroTotalDeServicos;
				dados[2] = .toStringvalorTotalDoServico
						.replace".", ","
						.valueOfdecimal.matvalorTotalDoServico;
				valorTotalASerPAgo = valorTotalDoServico / 2;
				dados[3] = .toStringvalorTotalASerPAgo
						.replace".", ","
						.valueOfdecimal.matvalorTotalASerPAgo;
				
				total = total + valorTotalDoServico;
				total2 = total2 + valorTotalASerPAgo;
				modelo.addRowdados;

				numeroTotalDeServicos = 0;
				valorTotalASerPAgo = 0;
				valorTotalDoServico = 0;
			
		
		PesquisarRelatorio.tipoBusca == 2
		

			relatorio.setBarbeiroPesquisarRelatorio.barbeiro;
			relatorio.setTipoServicoPesquisarRelatorio.servico;

			ResultSet rs = relatorioController
					.pesquisarPorBarbeiroEServicorelatorio;

			 rs.next
			

				 servicos.containsrs.getString"nome" == 
				
					servicos.addrs.getString"nome";
					contador++;
				
				
			

			 i=0; i<contador; i++ 
			
				rs.beeFirst;
				 rs.next
				
					 servicos.geti.equalsrs.getString"nome" 
					
						numero = rs.getString"preco".replace",", ".";
						 valor = .parsenumero;
						valorTotalDoServico = valorTotalDoServico + valor;

						numeroTotalDeServicos++;
					
			

				String[] dados =  String[4];
				dados[0] = servicos.geti;
				dados[1] = eger.toStringnumeroTotalDeServicos;
				dados[2] = .toStringvalorTotalDoServico
						.replace".", ","
						.valueOfdecimal.matvalorTotalDoServico;
				valorTotalASerPAgo = valorTotalDoServico / 2;
				dados[3] = .toStringvalorTotalASerPAgo
						.replace".", ","
						.valueOfdecimal.matvalorTotalASerPAgo;

				modelo.addRowdados;
				
				total = total + valorTotalDoServico;
				total2 = total2 + valorTotalASerPAgo;
				
				numeroTotalDeServicos = 0;
				valorTotalASerPAgo = 0;
				valorTotalDoServico = 0;
			
		
		PesquisarRelatorio.tipoBusca == 3 
		

			relatorio.setBarbeiroPesquisarRelatorio.barbeiro;
			relatorio.setDataFinalPesquisarRelatorio.dataFinal;
			relatorio.setDataInicialPesquisarRelatorio.dataInicial;

			ResultSet rs = relatorioController
					.pesquisarPorDataEBarbeirorelatorio;

			 rs.next
			

				 servicos.containsrs.getString"nome" ==  
				
					servicos.addrs.getString"nome";
					contador++;
				
			

			 i= 0; i<contador; i++ 
			
				rs.beeFirst;
				 rs.next 
				
					 servicos.geti.equalsrs.getString"nome" 
					
						numero = rs.getString"preco".replace",", ".";
						 valor = .parsenumero;
						valorTotalDoServico = valorTotalDoServico + valor;

						numeroTotalDeServicos++;
					
				

				String[] dados =  String[4];
				dados[0] = servicos.geti;
				dados[1] = eger.toStringnumeroTotalDeServicos;
				dados[2] = .toStringvalorTotalDoServico
						.replace".", ","
						.valueOfdecimal.matvalorTotalDoServico;
				valorTotalASerPAgo = valorTotalDoServico / 2;
				dados[3] = .toStringvalorTotalASerPAgo
						.replace".", ","
						.valueOfdecimal.matvalorTotalASerPAgo;

				modelo.addRowdados;
				
				total = total + valorTotalDoServico;
				total2 = total2 + valorTotalASerPAgo;
				
				numeroTotalDeServicos = 0;
				valorTotalASerPAgo = 0;
				valorTotalDoServico = 0;
			
		
		PesquisarRelatorio.tipoBusca == 4 
		

			relatorio.setBarbeiroPesquisarRelatorio.barbeiro;
			relatorio.setTipoServicoPesquisarRelatorio.servico;
			relatorio.setDataFinalPesquisarRelatorio.dataFinal;
			relatorio.setDataInicialPesquisarRelatorio.dataInicial;

			ResultSet rs = relatorioController
					.pesquisarPorDataBarbeiroEServicorelatorio;

			 rs.next 
			

				 servicos.containsrs.getString"nome" ==  
				
					servicos.addrs.getString"nome";
					contador++;
				
				
				
					// Nothing to do
				
			

			 i=0; i<contador; i++ 
			
				rs.beeFirst;
				 rs.next 
				
					 servicos.geti.equalsrs.getString"nome" 
					
						numero = rs.getString"preco".replace",", ".";
						 valor = .parsenumero;
						valorTotalDoServico = valorTotalDoServico + valor;
						
						numeroTotalDeServicos++;
				

				String[] dados =  String[4];
				dados[0] = servicos.geti;
				dados[1] = eger.toStringnumeroTotalDeServicos;
				dados[2] = .toStringvalorTotalDoServico
						.replace".", ","
						.valueOfdecimal.matvalorTotalDoServico;
				valorTotalASerPAgo = valorTotalDoServico / 2;
				dados[3] = .toStringvalorTotalASerPAgo
						.replace".", ","
						.valueOfdecimal.matvalorTotalASerPAgo;

				modelo.addRowdados;

				total = total + valorTotalDoServico;
				total2 = total2 + valorTotalASerPAgo;
				
				numeroTotalDeServicos = 0;
				valorTotalASerPAgo = 0;
				valorTotalDoServico = 0;
			
		
		PesquisarRelatorio.tipoBusca == 5
		

			relatorio.setTipoServicoPesquisarRelatorio.servico;

			ResultSet rs = relatorioController.pesquisarPorServicorelatorio;

			 rs.next
			

				 servicos.containsrs.getString"nome" == 
				
					servicos.addrs.getString"nome";
					contador++;
				


			 i=0; i<contador; i++
			
				rs.beeFirst;
				 rs.next 
				
					 servicos.geti.equalsrs.getString"nome"
					
						numero = rs.getString"preco".replace",", ".";
						 valor = .parsenumero;
						valorTotalDoServico = valorTotalDoServico + valor;

						numeroTotalDeServicos++;
					
				

				String[] dados =  String[4];
				dados[0] = servicos.geti;
				dados[1] = eger.toStringnumeroTotalDeServicos;
				dados[2] = .toStringvalorTotalDoServico
						.replace".", ","
						.valueOfdecimal.matvalorTotalDoServico;
				valorTotalASerPAgo = valorTotalDoServico / 2;
				dados[3] = .toStringvalorTotalASerPAgo
						.replace".", ","
						.valueOfdecimal.matvalorTotalASerPAgo;

				modelo.addRowdados;

				total = total + valorTotalDoServico;
				total2 = total2 + valorTotalASerPAgo;
				
				numeroTotalDeServicos = 0;
				valorTotalASerPAgo = 0;
				valorTotalDoServico = 0;
			
		
		PesquisarRelatorio.tipoBusca == 6
		

			relatorio.setTipoServicoPesquisarRelatorio.servico;
			relatorio.setDataFinalPesquisarRelatorio.dataFinal;
			relatorio.setDataInicialPesquisarRelatorio.dataInicial;

			ResultSet rs = relatorioController
					.pesquisarPorDataEServicorelatorio;

			 rs.next
			

				 servicos.containsrs.getString"nome" == 
				
					servicos.addrs.getString"nome";
					contador++;
				
			

			 i=0; i<contador; i++
			
				rs.beeFirst;
				 rs.next
				
					 servicos.geti.equalsrs.getString"nome" 
					
						numero = rs.getString"preco".replace",", ".";
						 valor = .parsenumero;
						valorTotalDoServico = valorTotalDoServico + valor;

						numeroTotalDeServicos++;
					

				String[] dados =  String[4];
				dados[0] = servicos.geti;
				dados[1] = eger.toStringnumeroTotalDeServicos;
				dados[2] = .toStringvalorTotalDoServico
						.replace".", ","
						.valueOfdecimal.matvalorTotalDoServico;
				valorTotalASerPAgo = valorTotalDoServico / 2;
				dados[3] = .toStringvalorTotalASerPAgo
						.replace".", ","
						.valueOfdecimal.matvalorTotalASerPAgo;

				modelo.addRowdados;

				total = total + valorTotalDoServico;
				total2 = total2 + valorTotalASerPAgo;
				
				numeroTotalDeServicos = 0;
				valorTotalASerPAgo = 0;
				valorTotalDoServico = 0;
			
		
		PesquisarRelatorio.tipoBusca == 7 
		

			relatorio.setDataFinalPesquisarRelatorio.dataFinal;
			relatorio.setDataInicialPesquisarRelatorio.dataInicial;

			ResultSet rs = relatorioController.pesquisarPorDatarelatorio;

			 rs.next
			

				 servicos.containsrs.getString"nome" == 
				
					servicos.addrs.getString"nome";
					contador++;
				
				
				
					// Nothing to do
				
			

			 i=0; i<contador; i++
			
				rs.beeFirst;
				 rs.next
				
					 servicos.geti.equalsrs.getString"nome"
					
						numero = rs.getString"preco".replace",", ".";
						 valor = .parsenumero;
						valorTotalDoServico = valorTotalDoServico + valor;

						numeroTotalDeServicos++;
					
					
					
						// Nothing to do
					
				

				String[] dados =  String[4];
				dados[0] = servicos.geti;
				dados[1] = eger.toStringnumeroTotalDeServicos;
				dados[2] = .toStringvalorTotalDoServico
						.replace".", ","
						.valueOfdecimal.matvalorTotalDoServico;
				valorTotalASerPAgo = valorTotalDoServico / 2;
				dados[3] = .toStringvalorTotalASerPAgo
						.replace".", ","
						.valueOfdecimal.matvalorTotalASerPAgo;

				modelo.addRowdados;

				total = total + valorTotalDoServico;
				total2 = total2 + valorTotalASerPAgo;
				
				numeroTotalDeServicos = 0;
				valorTotalASerPAgo = 0;
				valorTotalDoServico = 0;
			
		
		JButton btnPesquisar =  JButton"Pesquisar";
		
		btnPesquisar.addMouseListener MouseAdapter 
		
			
			// Método que permite a vizualização da janela que permite a pesquisa de um relatório
			@Override
			 void mouseClicked MouseEvent e 
						
					PesquisarRelatorio.tipoBusca = 0;
					PesquisarRelatorio frame =  PesquisarRelatorio;
					frame.setVisible;
					frame.setLocationRelativeTo;
					dispose;
				
				 ParseException e1
				
					mostrarMensagemDeErroe1.getMessage;
				
			
		;
		btnPesquisar.setBounds680, 13, 94, 62;
		contentPane.addbtnPesquisar;

		JButton btnVoltar =  JButton"Voltar";
		btnVoltar.addMouseListener MouseAdapter 
		
			
			// Método que permite novamente a vizualização da janela de Menu principal
			@Override
			 void mouseClicked MouseEvent e
			
				MenuPrincipal frame =  MenuPrincipal;
				frame.setVisible;
				frame.setLocationRelativeTo;
				dispose;
			
		;
		btnVoltar.setBounds680, 527, 94, 23;
		contentPane.addbtnVoltar;

		JPanel panel =  JPanel;
		panel.setBounds10, 529, 660, 22;
		contentPane.addpanel;
		panel.setLayout;

		JLabel lblLucroTotal =  JLabel"Valor total pesquisado:";
		lblLucroTotal.setBounds6, 4, 174, 14;
		panel.addlblLucroTotal;

		JLabel lblValor =  JLabel"R$ "
				+ String.valueOfdecimal.mattotal;
		lblValor.setHorizontalAlignmentSwingConstants.RIGHT;
		lblValor.setVerticalAlignmentSwingConstants.BOTTOM;
		lblValor.setBounds476, 4, 174, 14;
		panel.addlblValor;

		final JPanel painelGrafico =  JPanel;
		painelGrafico.setBounds10, 10, 660, 486;
		contentPane.addpainelGrafico;
		painelGrafico.setVisible;

		PesquisarRelatorio.tipoBusca != 0 
		
			 
			
				CategoryDataset cds;
				cds = createDatasetRelatorio;
				String titulo = "Total Por Dia";
				String eixoy = "Valores";
				String txt_legenda = "Ledenda:";
				 legenda = ;
				 tooltips = ;
				 urls = ;
				JFreeChart graf = ChartFactory.createBarCharttitulo,
						txt_legenda, eixoy, cds, PlotOrientation.VERTICAL,
						legenda, tooltips, urls;
				ChartPanel myChartPanel =  ChartPanelgraf, ;
				myChartPanel.setSizepainelGrafico.getWidth,
						painelGrafico.getHeight;
				myChartPanel.setVisible;
				painelGrafico.removeAll;
				painelGrafico.addmyChartPanel;
				painelGrafico.revalidate;
				painelGrafico.repa;

			 
			 SQLException e 
			
				mostrarMensagemDeErroe.getMessage;
			 
			 RelatorioException e 
			
				mostrarMensagemDeErroe.getMessage;
	
		JButton btnGrafico =  JButton"Gr\u00E1fico";
		btnGrafico.addMouseListener MouseAdapter 
		
			
			// Método que permite a vizualização de um painel gráfico dos relatorios
			@Override
			 void mouseClickedMouseEvent arg0
			
				 PesquisarRelatorio.tipoBusca != 0 
				
					painelGrafico.setVisible;
					scrollPane.setVisible;
				 
				
				
					JOptionPane
							.showMessageDialog,
									"VocÃª deve fazer uma busca para visualizar o grÃ¡fico.";
				
			
		;
		btnGrafico.setBounds680, 159, 94, 62;
		contentPane.addbtnGrafico;

		JButton btnTabela =  JButton"Tabela";
		btnTabela.addMouseListener MouseAdapter 
		
			
			// Método que permite a vizualização da tabela de relatórios
			@Override
			 void mouseClicked MouseEvent arg0
			
				painelGrafico.setVisible;
				scrollPane.setVisible;
			
		;
		btnTabela.setBounds680, 86, 94, 62;
		contentPane.addbtnTabela;
		
		JPanel painelTotalPago =  JPanel;
		painelTotalPago.setBounds10, 509, 660, 22;
		contentPane.addpainelTotalPago;
		painelTotalPago.setLayout;
		
		JLabel lblLabel =  JLabel"Valor total a ser pago para o barbeiro:";
		lblLabel.setBounds6, 4, 235, 14;
		painelTotalPago.addlblLabel;
		
		JLabel lblvalorTotalDoBarbeiro =  JLabel"R$ "
				+ String.valueOfdecimal.mattotal2;
		lblvalorTotalDoBarbeiro.setVerticalAlignmentSwingConstants.BOTTOM;
		lblvalorTotalDoBarbeiro.setHorizontalAlignmentSwingConstants.RIGHT;
		lblvalorTotalDoBarbeiro.setBounds476, 4, 174, 14;
		painelTotalPago.addlblvalorTotalDoBarbeiro;
	

	// erface utilizada para implementar os dados a serem exibidos no gráfico
	 CategoryDataset createDatasetRelatorio  throws SQLException,
			RelatorioException, PoerException, ParseException
			

		Relatorio relatorio =  Relatorio;
		ResultSet rs = ;

		PesquisarRelatorio.tipoBusca != 0 
		
			PesquisarRelatorio.tipoBusca == 1 
			
				relatorio.setBarbeiroPesquisarRelatorio.barbeiro;

				rs = RelatorioController.getInstance.pesquisarPorBarbeiro
						relatorio;
			
			PesquisarRelatorio.tipoBusca == 2
			
				relatorio.setBarbeiroPesquisarRelatorio.barbeiro;
				relatorio.setTipoServicoPesquisarRelatorio.servico;

				rs = RelatorioController.getInstance
						.pesquisarPorBarbeiroEServicorelatorio;
			
			PesquisarRelatorio.tipoBusca == 3
			
				relatorio.setBarbeiroPesquisarRelatorio.barbeiro;
				relatorio.setDataFinalPesquisarRelatorio.dataFinal;
				relatorio.setDataInicialPesquisarRelatorio.dataInicial;

				rs = RelatorioController.getInstance
						.pesquisarPorDataEBarbeirorelatorio;
			
			PesquisarRelatorio.tipoBusca == 4 
			
				relatorio.setBarbeiroPesquisarRelatorio.barbeiro;
				relatorio.setTipoServicoPesquisarRelatorio.servico;
				relatorio.setDataFinalPesquisarRelatorio.dataFinal;
				relatorio.setDataInicialPesquisarRelatorio.dataInicial;

				rs = RelatorioController.getInstance
						.pesquisarPorDataBarbeiroEServicorelatorio;
			
			PesquisarRelatorio.tipoBusca == 5 
			
				relatorio.setTipoServicoPesquisarRelatorio.servico;

				rs = RelatorioController.getInstance.pesquisarPorServico
						relatorio;
			
			PesquisarRelatorio.tipoBusca == 6 
			
				relatorio.setTipoServicoPesquisarRelatorio.servico;
				relatorio.setDataFinalPesquisarRelatorio.dataFinal;
				relatorio.setDataInicialPesquisarRelatorio.dataInicial;

				rs = RelatorioController.getInstance
						.pesquisarPorDataEServicorelatorio;
			
			PesquisarRelatorio.tipoBusca == 7
			
				relatorio.setDataFinalPesquisarRelatorio.dataFinal;
				relatorio.setDataInicialPesquisarRelatorio.dataInicial;

				rs = RelatorioController.getInstance.pesquisarPorData
						relatorio;
			
		List<String> dias =  ArrayList<String>;

		 rs.next
			 dias.containsrs.getString"data" == 
			
				dias.addrs.getString"data";
			

		 totalPorDia = 0;

		DefaultCategoryDataset dataset =  DefaultCategoryDataset;

		  i=0; i<dias.size; i++
		
			rs.beeFirst;

			 rs.next
				 rs.getString"data".equalsdias.geti
					totalPorDia += .parsers.getString"preco"
							.replace",", ".";

			dataset.addValuetotalPorDia, dias.geti, dias.get0 + " - "
					+ dias.getdias.size - 1;
			totalPorDia = 0;		

		 dataset;
	
	// Método que mostra uma mensagem de erro quando há uma exceção na classe
	  void mostrarMensagemDeErro String inmacao 
	
		JOptionPane.showMessageDialog, inmacao, "AtenÃ§Ã£o",
				JOptionPane.INMATION_MESSAGE;
	